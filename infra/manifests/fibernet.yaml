schema_version: 1

network:
  name: fibernet
  chain_id: 16384

# Execution genesis (alloc) for fibernet.
execution:
  alloc:
    # Treasury / operator address (50% of supply: 5_000_000 / 10_000_000).
    - address: "0x197f818c1313dc58b32d88078ecdfb40ea822614"
      balance_wei: "5000000000000000000000000"
    # Spam/blobs funding account (remaining supply: 50%).
    - address: "0x2411c6e43299a09d2225d58e9e7977237b3e4c49"
      balance_wei: "5000000000000000000000000"

# Container images pinned by tag (MVP). M4 can add optional digests.
images:
  ultramarine: "docker.io/loadnetwork/ultramarine:fibernet"
  load_reth: "docker.io/loadnetwork/load-reth:fibernet"

# Hosts are the failure domains. For public testnets, these should be public IPs/DNS.
hosts:
  - id: f4-metal-medium-lon2-fibernet-1
    public_ip: "67.213.117.143"
    ssh_user: ubuntu
  - id: f4-metal-medium-ams-fibernet-2
    public_ip: "64.34.87.1"
    ssh_user: ubuntu
  - id: f4-metal-medium-fra2-fibernet-2
    public_ip: "67.213.121.57"
    ssh_user: ubuntu

# 6 validators: 2 per host (3x2 topology)
nodes:
  - id: node-0
    host: f4-metal-medium-lon2-fibernet-1
    role: validator
  - id: node-1
    host: f4-metal-medium-lon2-fibernet-1
    role: validator
  - id: node-2
    host: f4-metal-medium-ams-fibernet-2
    role: validator
  - id: node-3
    host: f4-metal-medium-ams-fibernet-2
    role: validator
  - id: node-4
    host: f4-metal-medium-fra2-fibernet-2
    role: validator
  - id: node-5
    host: f4-metal-medium-fra2-fibernet-2
    role: validator

# Engine API policy for deploys: IPC-only.
engine:
  mode: ipc
  ipc_path_template: "/run/load-reth/{node_id}/engine.ipc"

# Port allocation is deterministic. "host-block" is easiest to operate.
ports:
  allocation: host-block
  host_block_stride: 1000
  el:
    http: 8545
    authrpc: 8551
    p2p: 30303
    metrics: 9001
  cl:
    p2p: 27000
    mempool: 28000
    metrics: 29000

# ValueSync must be enabled for multi-host networks.
sync:
  enabled: true

# Validators require archiver. The generator enforces presence of provider+token.
archiver:
  enabled: true
  provider_url: "https://archiver.example.com"
  provider_id: "loads3"

# Metrics exposure policy: "localhost" is safest for public testnets without centralized Prometheus.
exposure:
  metrics_bind: "127.0.0.1"

# Testnet override: allow >1 validator per host (unsafe for single-host failure tolerance).
validation:
  allow_unsafe_failure_domains: true
